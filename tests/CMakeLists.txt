find_package(GTest REQUIRED)
add_executable(test_simple test_simple.cpp)
target_link_libraries(test_simple PRIVATE GTest::GTest GTest::Main phkvstorage)

add_executable(test_buffers test_buffers.cpp)
target_link_libraries(test_buffers PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

add_executable(test_file test_file.cpp)
target_link_libraries(test_file PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

add_executable(test_stmfilestorage test_stmfilestorage.cpp)
target_link_libraries(test_stmfilestorage PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

add_executable(test_bigfilestorage test_bigfilestorage.cpp)
target_link_libraries(test_bigfilestorage PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

add_executable(test_volume test_volume.cpp)
target_link_libraries(test_volume PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

add_executable(test_phkvstorage test_phkvstorage.cpp)
target_link_libraries(test_phkvstorage PRIVATE GTest::GTest GTest::Main fmt::fmt phkvstorage)

if(MSVC)
    #warnings generated by internals of gtest
    set(DISABLED_WARNINGS /wd4251 /wd4275)
    target_compile_options(test_simple PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_buffers PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_file PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_stmfilestorage PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_bigfilestorage PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_volume PRIVATE ${DISABLED_WARNINGS})
    target_compile_options(test_phkvstorage PRIVATE ${DISABLED_WARNINGS})
endif()
